<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Lecture: MVC in Node.js & Express</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Warm Neutral" - A calming and focused learning environment using beige, slate, and subtle amber accents. -->
    <!-- Application Structure Plan: A tab-based navigation design is chosen to break the lecture into digestible sections: "Introduction," "The Core Concepts (MVC)," "The Request Flow," and "Practical Lab." This structure allows students to learn sequentially or jump to specific topics, enhancing usability. The "Request Flow" will be an interactive diagram, and the "Practical Lab" will present code in a clear, step-by-step format, making complex information more accessible than a linear document. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Lecture notes on MVC. Goal: Educate students.
        - Section 1 (Intro): Presented as clear, concise text blocks to establish foundational knowledge.
        - Section 2 (Core Concepts): Uses a three-column layout with cards for Model, View, and Controller. Interaction: Hover effects on cards provide more details, promoting active exploration. Justification: Visually separates the three core components for better comparison and understanding.
        - Section 3 (Request Flow): An interactive diagram built with HTML/CSS and JS. Interaction: Clicking on each step of the flow reveals a detailed explanation. Justification: This transforms a static concept into a dynamic, engaging visualization, which is crucial for understanding process flows. Library/Method: Vanilla JS and Tailwind CSS.
        - Section 4 (Practical Lab): Code examples are presented in styled, copyable blocks. A step-by-step accordion or tabbed interface breaks down the exercise. Justification: Organizes the coding exercise into manageable steps, preventing overwhelm and facilitating a hands-on learning experience.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7; /* Warm Beige */
            color: #4A5568; /* Slate Gray */
        }
        .tab-active {
            border-bottom-color: #F59E0B; /* Amber Accent */
            color: #1A202C;
            font-weight: 600;
        }
        .tab-inactive {
            border-bottom-color: transparent;
            color: #718096;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .flow-step {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .flow-step.active {
            transform: translateY(-5px) scale(1.05);
            background-color: #F59E0B;
            color: white;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800">The MVC Pattern in Node.js & Express</h1>
            <p class="mt-2 text-lg text-gray-600">An Interactive Guide to Structuring Your Backend Applications</p>
        </header>

        <!-- Tab Navigation -->
        <nav class="mb-8 border-b border-gray-200">
            <ul class="flex flex-wrap -mb-px justify-center text-sm font-medium text-center">
                <li class="mr-2">
                    <button class="inline-block p-4 border-b-2 rounded-t-lg tab-active" data-tab="intro">
                        <span class="text-xl mr-2">🚀</span> Introduction
                    </button>
                </li>
                <li class="mr-2">
                    <button class="inline-block p-4 border-b-2 rounded-t-lg tab-inactive" data-tab="concepts">
                        <span class="text-xl mr-2">🧱</span> Core Concepts
                    </button>
                </li>
                <li class="mr-2">
                    <button class="inline-block p-4 border-b-2 rounded-t-lg tab-inactive" data-tab="flow">
                        <span class="text-xl mr-2">🔄</span> The Request Flow
                    </button>
                </li>
                <li>
                    <button class="inline-block p-4 border-b-2 rounded-t-lg tab-inactive" data-tab="lab">
                        <span class="text-xl mr-2">💻</span> Practical Lab
                    </button>
                </li>
            </ul>
        </nav>

        <!-- Content Sections -->
        <main>
            <!-- Introduction Section -->
            <section id="intro" class="content-section active">
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">Why Structure Matters</h2>
                    <p class="mb-4 text-lg">Welcome! In software development, "architecture" isn't about buildings; it's about the blueprint of your code. An architectural pattern is a reusable, proven solution to a commonly occurring problem within a given context. Its primary goal is to create a system that is organized, scalable, and easy to maintain.</p>
                    
                    <div class="mt-8 p-6 rounded-lg bg-red-50 border-l-4 border-red-400">
                        <h3 class="text-xl font-semibold text-red-800">The "Spaghetti Code" Problem</h3>
                        <p class="mt-2 text-red-700">Without a clear structure, applications can devolve into "spaghetti code." This is where all logic—database queries, business rules, and user interface code—is tangled together. A single file might contain hundreds of lines, making it nearly impossible to read, debug, or update without breaking something else.</p>
                    </div>

                    <div class="mt-8 p-6 rounded-lg bg-green-50 border-l-4 border-green-400">
                        <h3 class="text-xl font-semibold text-green-800">The MVC Solution: A Simple Analogy</h3>
                        <p class="mt-2 text-green-700">Think of building a house. You wouldn't just pile up bricks, pipes, and wires randomly. You'd have a plan: a solid **foundation** (the Model), distinct **rooms and walls** (the View), and a **management system** for plumbing and electricity (the Controller). MVC provides this essential blueprint for your application.</p>
                    </div>
                </div>
            </section>

            <!-- Core Concepts Section -->
            <section id="concepts" class="content-section">
                 <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">The Three Pillars of MVC</h2>
                    <p class="mt-2 text-lg">MVC separates an application into three interconnected components. This separation of concerns is the key to its power.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Model Card -->
                    <div class="card bg-white p-6 rounded-lg shadow-lg border-t-4 border-blue-500">
                        <h3 class="text-2xl font-bold text-blue-800"><span class="text-3xl mr-2">🧠</span> Model</h3>
                        <p class="mt-2 font-semibold text-gray-700">The Data & Logic Layer</p>
                        <p class="mt-4">The Model is the brain of your application. It directly manages the data, logic, and rules. It's responsible for interacting with the database, validating data, and enforcing business rules. It knows nothing about how the data will be displayed.</p>
                    </div>
                    <!-- View Card -->
                    <div class="card bg-white p-6 rounded-lg shadow-lg border-t-4 border-green-500">
                        <h3 class="text-2xl font-bold text-green-800"><span class="text-3xl mr-2">🎨</span> View</h3>
                        <p class="mt-2 font-semibold text-gray-700">The Presentation Layer</p>
                        <p class="mt-4">The View is what the user sees. In a traditional web app, this is the HTML template. In a modern API (like the one we're building), the "View" is the data structured as JSON, ready for a frontend client to consume. Its job is only to present data.</p>
                    </div>
                    <!-- Controller Card -->
                    <div class="card bg-white p-6 rounded-lg shadow-lg border-t-4 border-yellow-500">
                        <h3 class="text-2xl font-bold text-yellow-800"><span class="text-3xl mr-2">🚦</span> Controller</h3>
                        <p class="mt-2 font-semibold text-gray-700">The Traffic Cop</p>
                        <p class="mt-4">The Controller acts as the intermediary. It receives the user's request, communicates with the Model to fetch or update data, and then decides how the View should respond. It orchestrates the entire process without handling data logic or presentation itself.</p>
                    </div>
                </div>
            </section>

            <!-- The Request Flow Section -->
            <section id="flow" class="content-section">
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Visualizing the Request-Response Cycle</h2>
                    <p class="text-center text-lg mb-8">Click each step to understand its role in the process.</p>
                    
                    <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4">
                        <div id="flow-step-1" class="flow-step p-4 bg-gray-200 rounded-lg text-center w-full md:w-1/5">
                            <div class="text-2xl mb-2">1. Request</div>
                            <div class="text-4xl">➡️</div>
                        </div>
                        <div id="flow-step-2" class="flow-step p-4 bg-gray-200 rounded-lg text-center w-full md:w-1/5">
                             <div class="text-2xl mb-2">2. Router</div>
                            <div class="text-4xl">🚦</div>
                        </div>
                        <div id="flow-step-3" class="flow-step p-4 bg-gray-200 rounded-lg text-center w-full md:w-1/5">
                             <div class="text-2xl mb-2">3. Controller</div>
                            <div class="text-4xl">🧠</div>
                        </div>
                         <div id="flow-step-4" class="flow-step p-4 bg-gray-200 rounded-lg text-center w-full md:w-1/5">
                             <div class="text-2xl mb-2">4. Model</div>
                            <div class="text-4xl">💾</div>
                        </div>
                        <div id="flow-step-5" class="flow-step p-4 bg-gray-200 rounded-lg text-center w-full md:w-1/5">
                             <div class="text-2xl mb-2">5. Response</div>
                            <div class="text-4xl">⬅️</div>
                        </div>
                    </div>
                    
                    <div id="flow-explanation" class="mt-8 p-6 bg-blue-50 border border-blue-200 rounded-lg min-h-[100px]">
                        <p class="text-blue-800 text-lg">Click on a step above to see the explanation here.</p>
                    </div>
                </div>
            </section>

            <!-- Practical Lab Section -->
            <section id="lab" class="content-section">
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">Hands-On: Building a Simple Posts API</h2>
                    
                    <!-- Step 1 -->
                    <div class="mb-6">
                        <h3 class="text-2xl font-semibold mb-3">Step 1: Project Setup & Folder Structure</h3>
                        <p class="mb-4">First, initialize your project and install Express. Then, create the core folders for our MVC pattern. This separation is the foundation of our organized application.</p>
                        <div class="code-block">
                            <pre><code># Initialize project and install Express
npm init -y
npm install express

# Create the MVC folder structure
mkdir controllers models routes</code></pre>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="mb-6">
                        <h3 class="text-2xl font-semibold mb-3">Step 2: Create the Model (`models/Post.js`)</h3>
                        <p class="mb-4">The Model handles all data operations. For simplicity, we'll use an in-memory array. Notice how all functions (`getAll`, `findById`, etc.) are related to data management. This file doesn't know or care about HTTP requests.</p>
                        <div class="code-block">
                            <pre><code>// models/Post.js
const posts = [
  { id: 1, title: 'First Post', content: 'This is my first post!' },
  { id: 2, title: 'Second Post', content: 'Hello again!' }
];

exports.getAll = () => posts;

exports.findById = (id) => {
  const postId = parseInt(id, 10);
  return posts.find(post => post.id === postId);
};

exports.create = (postData) => {
  const newId = posts.length > 0 ? Math.max(...posts.map(p => p.id)) + 1 : 1;
  const newPost = { id: newId, ...postData };
  posts.push(newPost);
  return newPost;
};
// ... (update and delete functions would go here)</code></pre>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="mb-6">
                        <h3 class="text-2xl font-semibold mb-3">Step 3: Create the Controller (`controllers/postsController.js`)</h3>
                        <p class="mb-4">The Controller connects the routes to the model. It handles the `req` and `res` objects, calls the appropriate Model function, and sends the response. Its role is purely coordination.</p>
                        <div class="code-block">
                            <pre><code>// controllers/postsController.js
const Post = require('../models/Post');

exports.getAllPosts = (req, res) => {
  const allPosts = Post.getAll();
  res.status(200).json(allPosts);
};

exports.getPostById = (req, res) => {
  const post = Post.findById(req.params.id);
  if (post) {
    res.status(200).json(post);
  } else {
    res.status(404).json({ message: 'Post not found' });
  }
};
// ... (create, update, delete handlers would go here)</code></pre>
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div class="mb-6">
                        <h3 class="text-2xl font-semibold mb-3">Step 4: Define the Routes (`routes/postsRoutes.js`)</h3>
                        <p class="mb-4">The Router defines the API endpoints (URLs) and maps them to the specific Controller functions. It's the entry point for all requests related to posts.</p>
                         <div class="code-block">
                            <pre><code>// routes/postsRoutes.js
const express = require('express');
const router = express.Router();
const postsController = require('../controllers/postsController');

router.get('/', postsController.getAllPosts);
router.get('/:id', postsController.getPostById);
// ... (POST, PUT, DELETE routes would go here)

module.exports = router;</code></pre>
                        </div>
                    </div>

                     <!-- Step 5 -->
                    <div class="mb-6">
                        <h3 class="text-2xl font-semibold mb-3">Step 5: Wire Everything Together (`app.js`)</h3>
                        <p class="mb-4">Finally, your main `app.js` file sets up the Express server, applies middleware (like `express.json()`), and tells the application to use your router for any requests to the `/posts` path.</p>
                         <div class="code-block">
                            <pre><code>// app.js
const express = require('express');
const postsRoutes = require('./routes/postsRoutes');

const app = express();
const PORT = 3000;

app.use(express.json()); // Middleware to parse JSON
app.use('/posts', postsRoutes); // Use the posts router

app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});</code></pre>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('nav button');
            const contentSections = document.querySelectorAll('.content-section');
            const flowSteps = document.querySelectorAll('.flow-step');
            const flowExplanation = document.getElementById('flow-explanation');

            const flowExplanations = {
                'flow-step-1': '<strong>1. User Request:</strong> The cycle begins when a user or client application sends an HTTP request to a specific URL (e.g., `GET /posts/123`). This is the initial trigger.',
                'flow-step-2': '<strong>2. Router:</strong> Express\'s router intercepts the incoming request. It matches the URL and HTTP method (`GET`, `POST`, etc.) to a pre-defined route and directs the request to the corresponding Controller function.',
                'flow-step-3': '<strong>3. Controller:</strong> The Controller receives the request. It doesn\'t perform data logic itself but calls the appropriate function on the Model to fetch, create, or update data (e.g., `Post.findById(123)`).',
                'flow-step-4': '<strong>4. Model:</strong> The Model executes the request. It interacts directly with the database or data source to perform the required operation and returns the result (the data or a success/fail status) back to the Controller.',
                'flow-step-5': '<strong>5. Response:</strong> The Controller receives the data from the Model, packages it into a response (usually JSON for an API), sets the appropriate HTTP status code (e.g., 200 OK, 404 Not Found), and sends it back to the user/client.'
            };

            // Tab navigation logic
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => {
                        t.classList.remove('tab-active');
                        t.classList.add('tab-inactive');
                    });
                    tab.classList.remove('tab-inactive');
                    tab.classList.add('tab-active');

                    const target = tab.getAttribute('data-tab');
                    contentSections.forEach(section => {
                        if (section.id === target) {
                            section.classList.add('active');
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            // Interactive flow diagram logic
            flowSteps.forEach(step => {
                step.addEventListener('click', () => {
                    flowSteps.forEach(s => s.classList.remove('active'));
                    step.classList.add('active');
                    flowExplanation.innerHTML = `<p class="text-blue-800 text-lg">${flowExplanations[step.id]}</p>`;
                });
            });
            
            // Activate the first flow step by default for initial view
            if (document.getElementById('flow-step-1')) {
                 document.getElementById('flow-step-1').click();
            }
        });
    </script>
</body>
</html>
